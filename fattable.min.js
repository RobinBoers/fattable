(function(){function G(c,a){function b(){this.constructor=c}for(var f in a)M.call(a,f)&&(c[f]=a[f]);b.prototype=a.prototype;c.prototype=new b;c.$=a.prototype}var H,z,v,A,I,x,y,B,J,u,K,C,D,E,F,L,N,M={}.hasOwnProperty;K=function(c){var a,b,f,g,e;a=[0];g=b=0;for(e=c.length;g<e;g++)f=c[g],b+=f,a.push(b);return a};u=function(c,a,b){return c<a?a:c>b?b:c};C=new (function(){function c(){this.R=[];this.Y=this.result=!1}c.prototype.qa=function(a){this.Y?a(this.result):this.R.push(a)};c.prototype.na=function(){var a,
b,f,c,e;this.Y=!0;this.result=void 0;c=this.R;e=[];b=0;for(f=c.length;b<f;b++)a=c[b],e.push(a(void 0));return e};return c}());F=function(){document.removeEventListener("DOMContentLoaded",F);return C.na()};document.addEventListener("DOMContentLoaded",F);y=function(){function c(){}c.prototype.D=function(){return!1};c.prototype.W=function(){return!1};c.prototype.v=function(a,b,f){null==f&&(f=function(){});return setTimeout(function(){return f(a+","+b)},100)};c.prototype.w=function(a,b){null==b&&(b=function(){});
return b("col "+a)};return c}();x=function(c){function a(){return N=a.$.constructor.apply(this,arguments)}G(a,c);a.prototype.ea=function(b,a){return b+","+a};a.prototype.D=function(){return!0};a.prototype.W=function(){return!0};a.prototype.v=function(b,a,c){null==c&&(c=function(){});return c(this.ea(b,a))};a.prototype.w=function(b,a){null==a&&(a=function(){});return a("col "+b)};return a}(y);z=function(){function c(a){this.size=null!=a?a:100;this.data={};this.C=[]}c.prototype.O=function(){return this.data.hasOwnProperty(void 0)};
c.prototype.get=function(a){return this.data[a]};c.prototype.set=function(a,b){var f;f=this.C.indexOf(a);0<=f&&this.C.splice(f,1);this.C.push(a);this.C.length>=this.size&&(f=this.C.shift(),delete this.data[f]);return this.data[a]=b};return c}();v=function(c){function a(a){null==a&&(a=100);this.Q=new z(a);this.P=new z(a);this.M={};this.B={}}G(a,c);a.prototype.w=function(a){var f=this;if(this.P.O())return cb(this.P.get(void 0)(a));if(null!=this.B[void 0])return this.B[void 0].push([a,cb]);this.B[void 0]=
[[a,cb]];return this.Fa(void 0,function(c){var e,k,h,d;f.P.set(void 0,c);d=f.B[void 0];k=0;for(h=d.length;k<h;k++)e=d[k],a=e[0],e=e[1],e(c(a));return delete f.B[void 0]})};a.prototype.D=function(){return this.Q.O()};a.prototype.v=function(a,f,c){null==c&&(c=function(){});if(this.Q.O())return c(this.Q.get(void 0)(a,f));if(null!=this.M[void 0])return this.M[void 0].push([a,f,c]);this.M[void 0]=[[a,f,c]]};a.prototype.w=function(a,f){null==f&&(f=function(){});return f("col "+a)};return a}(y);J=function(c,
a){var b,f,g,e;if(c[0]>a)return 0;b=0;for(f=c.length;b+2<f;)if(g=(b+f)/2|0,e=c[g],e<a)b=g;else if(e>a)f=g;else return g;return b};A=function(){function c(){}c.prototype.J=function(a){var b,f;f=a.cells;for(b in f);a=a.m;f=[];for(b in a)f.push(void 0);return f};c.prototype.U=function(a,b){return a.textContent=b};c.prototype.N=function(a,b){return a.textContent=b};c.prototype.da=function(a){a.textContent="NA"};c.prototype.T=function(a){a.textContent="NA"};return c}();L=function(c,a){var b,f;b=1;for(f=
0;f+b<c.length;)c[f+b]-c[f]>a?f+=1:b+=1;return b};H=function(){function c(){this.I=[]}c.prototype.bind=function(a,b,f){this.I.push([a,b,f]);return a.addEventListener(b,f)};c.prototype.ra=function(){var a,b,f,c,e,k;k=this.I;c=0;for(e=k.length;c<e;c++)a=k[c],f=a[0],b=a[1],a=a[2],f.removeEventListener(b,a);this.I=[]};return c}();I=function(){function c(a,b,c,g,e){var k,h,d=this;this.a=a;this.b=b;this.k=c;this.q=g;this.f=document.createElement("div");this.f.className+=" fattable-v-scrollbar";this.d=document.createElement("div");
this.d.className+=" fattable-h-scrollbar";this.a.appendChild(this.f);this.a.appendChild(this.d);a=document.createElement("div");a.style.height="1px";a.style.width=this.k+"px";b=document.createElement("div");b.style.width="1px";b.style.height=this.q+"px";this.d.appendChild(a);this.f.appendChild(b);this.Z=Math.max(this.d.offsetHeight,this.f.offsetWidth);this.f.style.bottom=this.Z+"px";this.d.style.right=this.Z+"px";this.scrollTop=this.scrollLeft=0;this.d.onscroll=function(){if(!d.r)return d.scrollLeft=
d.d.scrollLeft,d.p(d.scrollLeft,d.scrollTop)};this.f.onscroll=function(){if(!d.r)return d.scrollTop=d.f.scrollTop,d.p(d.scrollLeft,d.scrollTop)};e.bind(this.a,"mousedown",function(a){if(1===a.button)return d.r=!0,d.a.className="fattable-body-container fattable-moving",d.L=d.scrollLeft+a.clientX,d.ca=d.scrollTop+a.clientY});e.bind(this.a,"mouseup",function(){d.r=!1;return d.a.className="fattable-body-container"});e.bind(this.a,"mousemove",function(a){return window.setTimeout(function(){var b,c;if(d.r)return b=
-a.clientX+d.L,c=-a.clientY+d.ca,d.H(b,c)},0)});e.bind(this.a,"mouseout",function(a){if(d.r&&(null===a.toElement||a.toElement.parentElement.parentElement!==d.a))return d.a.className="fattable-body-container",d.r=!1});e.bind(this.b,"mousedown",function(a){if(1===a.button)return d.A=!0,d.b.className="fattable-header-container fattable-moving",d.L=d.scrollLeft+a.clientX});e.bind(this.a,"mouseup",function(){d.A=!1;return d.b.className="fattable-header-container"});e.bind(this.b,"mousemove",function(a){return window.setTimeout(function(){var b;
if(d.A)return b=-a.clientX+d.L,d.H(b)},0)});e.bind(this.b,"mouseout",function(a){if(d.A&&(null===a.toElement||a.toElement.parentElement.parentElement!==d.b))return d.A.className="fattable-header-container",d.A=!1});this.ha=this.k>this.d.clientWidth?this.k-this.d.clientWidth:0;this.ia=this.q>this.f.clientHeight?this.q-this.f.clientHeight:0;h="DOMMouseScroll";void 0!==this.a.onwheel?h="wheel":void 0!==this.a.onmousewheel&&(h="mousewheel");k=function(){switch(h){case "wheel":return function(a){var b,
c,f,d,e,g;switch(a.Da){case a.ta:b=null!=(f=-50*a.aa)?f:0;c=null!=(d=-50*a.ba)?d:0;break;case a.ua:b=null!=(e=-1*a.aa)?e:0,c=null!=(g=-1*a.ba)?g:0}return[b,c]};case "mousewheel":return function(a){var b,c,f;b=null!=(c=a.wheelDeltaX)?c:0;a=null!=(f=a.wheelDeltaY)?f:a.wheelDelta;return[b,a]};case "DOMMouseScroll":return function(a){var b,c;c=b=0;a.axis===a.va?b=-50*a.detail:c=-50*a.detail;return[b,c]}}}();e.bind(this.a,h,function(a){var b;b=k(a);if(d.H(d.scrollLeft-b[0],d.scrollTop-b[1]))return a.preventDefault()});
e.bind(this.b,h,function(a){var b;b=k(a);if(d.H(d.scrollLeft-b[0],d.scrollTop))return a.preventDefault()})}c.prototype.p=function(){};c.prototype.H=function(a,b){var c;c=!1;null!=a?(a=u(a,0,this.ha),this.scrollLeft!==a&&(c=!0,this.scrollLeft=a)):a=this.scrollLeft;null!=b?(b=u(b,0,this.ia),this.scrollTop!==b&&(c=!0,this.scrollTop=b)):b=this.scrollTop;this.d.scrollLeft=a;this.f.scrollTop=b;this.p(a,b);return c};return c}();B=function(){function c(a){var b,c=this;b=a.a;if(null==b)throw"container not specified.";
if("string"===typeof b)this.a=document.querySelector(b);else if("object"===typeof b)this.a=b;else throw"Container must be a string or a dom element.";this.j(a,"painter",new A);this.j(a,"autoSetup",!0);this.j(a,"model");this.j(a,"nbRows");this.j(a,"rowHeight");this.j(a,"columnWidths");this.j(a,"rowHeight");this.j(a,"headerHeight");this.la=this.K.length;-1===(" "+this.a.className+" ").search(/\sfattable\s/)&&(this.a.className+=" fattable");this.q=this.G*this.ma;this.t=K(this.K);this.k=this.t[this.t.length-
1];this.m={};this.cells={};this.S=new H;this.V();this.Ca&&C.qa(function(){return c.pa()})}c.prototype.j=function(a,b,c){if(null==a[b]){if(void 0===c)throw"Expected parameter <"+b+">";this[b]=c}else this[b]=a[b]};c.prototype.V=function(){this.sa=this.a.offsetWidth;this.fa=this.a.offsetHeight-this.F;this.e=Math.min(L(this.t,this.sa)+2,this.K.length);this.g=(this.fa/this.G|0)+2};c.prototype.ga=function(a,b){return[u(b/this.G|0,0,this.ma-this.g),u(J(this.t,a),0,this.la-this.e)]};c.prototype.J=function(){var a;
this.S.ra();null!=(a=this.ya)&&(a.p=null);this.i.J(this);this.a.innerHTML="";return this.b=this.h=null};c.prototype.pa=function(){var a,b,c,g,e,k,h,d=this;this.J();this.V();this.m={};this.cells={};this.a.innerHTML="";this.b=document.createElement("div");this.b.className+=" fattable-header-container";this.b.style.height=this.F+"px";this.s=document.createElement("div");this.s.className="fattable-viewport";this.s.style.width=this.k+"px";this.s.style.height=this.F+"px";this.b.appendChild(this.s);this.h=
document.createElement("div");this.h.className="fattable-body-container";this.h.style.top=this.F+"px";this.l=document.createElement("div");this.l.className="fattable-viewport";this.l.style.width=this.k+"px";this.l.style.height=this.q+"px";g=a=this.e;for(k=2*this.e;a<k;g=a+=1)for(c=e=this.g,h=2*this.g;e<h;c=e+=1)b=document.createElement("div"),b.c=!1,b.style.height=this.G+"px",this.l.appendChild(b),this.cells[c+","+g]=b;a=e=this.e;for(k=2*this.e;e<k;a=e+=1)b=document.createElement("div"),b.style.height=
this.F+"px",b.c=!1,this.m[a]=b,this.s.appendChild(b);this.u=this.g;this.n=this.e;this.display(0,0);this.a.appendChild(this.h);this.a.appendChild(this.b);this.h.appendChild(this.l);this.X();this.scroll=new I(this.h,this.b,this.k,this.q,this.S);return this.scroll.p=function(a,b){var e;e=d.ga(a,b);c=e[0];g=e[1];d.display(c,g);d.s.style.left=-a+"px";d.l.style.left=-a+"px";d.l.style.top=-b+"px";clearTimeout(d.oa);d.oa=setTimeout(d.X.bind(d),200);return d.p(a,b)}};c.prototype.X=function(){var a,b,c,g,e,
k,h,d,l,n=this;k=function(a){a.c&&n.o.w(g,function(b){a.c=!1;return n.i.U(a,b)})};l=[];g=h=this.n;for(d=this.n+this.e;h<d;g=h+=1)b=this.m[g],k(b),l.push(function(){var b,d,h,k=this;h=[];c=b=this.u;for(d=this.u+this.g;b<d;c=b+=1)e=c+","+g,a=this.cells[e],a.c?h.push(function(a){return k.o.v(c,g,function(b){a.c=!1;return k.i.N(a,b)})}(a)):h.push(void 0);return h}.call(this));return l};c.prototype.p=function(){};c.prototype.display=function(a,b){this.b.style.display="none";this.h.style.display="none";
this.ja(b);this.ka(a);this.b.style.display="";return this.h.style.display=""};c.prototype.ja=function(a){var b,c,g,e,k,h,d,l,n,m,q,r,p,s,t,w=this;n=this.u;q=a-this.n;if(0!==q){k=Math.min(Math.abs(q),this.e);for(b=p=0;p<k;b=p+=1)for(0<q?(m=this.n+b,e=a+b+this.e-k):(m=this.n+this.e-k+b,e=a+b),g=this.t[e]+"px",c=this.K[e]+"px",h=this.m[m],delete this.m[m],this.o.W(e)?this.o.w(e,function(a){h.c=!1;return w.i.U(h,a)}):h.c||(h.c=!0,this.i.da(h)),h.style.left=g,h.style.width=c,this.m[e]=h,r=function(a){w.o.D(d,
e)?w.o.v(d,e,function(b){a.c=!1;return w.i.N(a,b)}):a.c||(a.c=!0,w.i.T(a))},d=s=n,t=n+this.g;s<t;d=s+=1)l=d+","+m,b=this.cells[l],delete this.cells[l],this.cells[d+","+e]=b,b.style.left=g,b.style.width=c,r(b);this.n=a}};c.prototype.ka=function(a){var b,c,g,e,k,h,d,l,n,m,q,r,p,s,t=this;h=this.u;d=this.n;m=a-h;if(0!==m){g=Math.min(Math.abs(m),this.g);for(b=r=0;r<g;b=r+=1)for(0<m?(l=h+b,c=a+b+this.g-g):(l=h+this.g-g+b,c=a+b),n=c*this.G+"px",q=function(a){t.o.D(c,e)?t.o.v(c,e,function(b){a.c=!1;return t.i.N(a,
b)}):a.c||(a.c=!0,t.i.T(a))},e=p=d,s=d+this.e;p<s;e=p+=1)k=l+","+e,b=this.cells[k],delete this.cells[k],this.cells[c+","+e]=b,b.style.top=n,q(b);this.u=a}};return c}();D=function(c){return new B(c)};v={Aa:y,Ba:B,xa:A,wa:v,za:x,bound:u};for(E in v)x=v[E],D[E]=x;window.Ea=D}).call(this);
