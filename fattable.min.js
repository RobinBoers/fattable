(function(){function E(c,a){function b(){this.constructor=c}for(var e in a)L.call(a,e)&&(c[e]=a[e]);b.prototype=a.prototype;c.prototype=new b;c.aa=a.prototype}var F,x,u,y,G,v,w,z,H,t,I,A,B,C,D,J,L={}.hasOwnProperty;I=function(c){var a,b,e,g,d;a=[0];g=b=0;for(d=c.length;g<d;g++)e=c[g],b+=e,a.push(b);return a};t=function(c,a,b){return c<a?a:c>b?b:c};A=new (function(){function c(){this.R=[];this.Z=this.result=!1}c.prototype.ra=function(a){this.Z?a(this.result):this.R.push(a)};c.prototype.oa=function(){var a,
b,e,c,d;this.Z=!0;this.result=void 0;c=this.R;d=[];b=0;for(e=c.length;b<e;b++)a=c[b],d.push(a(void 0));return d};return c}());D=function(){document.removeEventListener("DOMContentLoaded",D);return A.oa()};document.addEventListener("DOMContentLoaded",D);w=function(){function c(){}c.prototype.D=function(){return!1};c.prototype.W=function(){return!1};c.prototype.v=function(a,b,e){null==e&&(e=function(){});return e("getCell not implemented")};c.prototype.w=function(a,b){null==b&&(b=function(){});return b("getHeader not implemented")};
return c}();v=function(c){function a(){return a.aa.constructor.apply(this,arguments)}E(a,c);a.prototype.fa=function(b,a){return b+","+a};a.prototype.ga=function(b){return"col "+b};a.prototype.D=function(){return!0};a.prototype.W=function(){return!0};a.prototype.v=function(b,a,c){null==c&&(c=function(){});return c(this.fa(b,a))};a.prototype.w=function(b,a){null==a&&(a=function(){});return a(this.ga(b))};return a}(w);x=function(){function c(a){this.size=null!=a?a:100;this.data={};this.C=[]}c.prototype.O=
function(){return this.data.hasOwnProperty(void 0)};c.prototype.get=function(a){return this.data[a]};c.prototype.set=function(a,b){var e;e=this.C.indexOf(a);0<=e&&this.C.splice(e,1);this.C.push(a);this.C.length>=this.size&&(e=this.C.shift(),delete this.data[e]);return this.data[a]=b};return c}();u=function(c){function a(b){null==b&&(b=100);this.Q=new x(b);this.P=new x(b);this.M={};this.B={}}E(a,c);a.prototype.w=function(b){if(this.P.O())return cb(this.P.get(void 0)(b));if(null!=this.B[void 0])return this.B[void 0].push([b,
cb]);this.B[void 0]=[[b,cb]];return this.Ga(void 0,function(a){return function(c){var d,h,f,k;a.P.set(void 0,c);k=a.B[void 0];h=0;for(f=k.length;h<f;h++)d=k[h],b=d[0],d=d[1],d(c(b));return delete a.B[void 0]}}(this))};a.prototype.D=function(){return this.Q.O()};a.prototype.v=function(a,e,c){null==c&&(c=function(){});if(this.Q.O())return c(this.Q.get(void 0)(a,e));if(null!=this.M[void 0])return this.M[void 0].push([a,e,c]);this.M[void 0]=[[a,e,c]]};a.prototype.w=function(a,c){null==c&&(c=function(){});
return c("col "+a)};return a}(w);H=function(c,a){var b,e,g,d;if(c[0]>a)return 0;b=0;for(e=c.length;b+2<e;)if(g=(b+e)/2|0,d=c[g],d<a)b=g;else if(d>a)e=g;else return g;return b};y=function(){function c(){}c.prototype.J=function(a){var b,c;c=a.cells;for(b in c);a=a.m;c=[];for(b in a)c.push(void 0);return c};c.prototype.U=function(a,b){return a.textContent=b};c.prototype.N=function(a,b){return a.textContent=b};c.prototype.ea=function(a){a.textContent="NA"};c.prototype.T=function(a){return a.textContent=
"NA"};return c}();J=function(c,a){var b,e;b=1;for(e=0;e+b<c.length;)c[e+b]-c[e]>a?e+=1:b+=1;return b};F=function(){function c(){this.I=[]}c.prototype.bind=function(a,b,c){this.I.push([a,b,c]);return a.addEventListener(b,c)};c.prototype.sa=function(){var a,b,c,g,d,h;h=this.I;g=0;for(d=h.length;g<d;g++)a=h[g],c=a[0],b=a[1],a=a[2],c.removeEventListener(b,a);this.I=[]};return c}();G=function(){function c(a,b,c,g,d){var h,f;this.a=a;this.b=b;this.k=c;this.q=g;this.e=document.createElement("div");this.e.className+=
" fattable-v-scrollbar";this.d=document.createElement("div");this.d.className+=" fattable-h-scrollbar";this.a.appendChild(this.e);this.a.appendChild(this.d);a=document.createElement("div");a.style.height="1px";a.style.width=this.k+"px";b=document.createElement("div");b.style.width="1px";b.style.height=this.q+"px";this.d.appendChild(a);this.e.appendChild(b);this.$=Math.max(this.d.offsetHeight,this.e.offsetWidth);this.e.style.bottom=this.$+"px";this.d.style.right=this.$+"px";this.scrollTop=this.scrollLeft=
0;this.d.onscroll=function(a){return function(){if(!a.r&&a.scrollLeft!==a.d.scrollLeft)return a.scrollLeft=a.d.scrollLeft,a.p(a.scrollLeft,a.scrollTop)}}(this);this.e.onscroll=function(a){return function(){if(!a.r&&a.scrollTop!==a.e.scrollTop)return a.scrollTop=a.e.scrollTop,a.p(a.scrollLeft,a.scrollTop)}}(this);d.bind(this.a,"mousedown",function(a){return function(b){if(1===b.button)return a.r=!0,a.a.className="fattable-body-container fattable-moving",a.L=a.scrollLeft+b.clientX,a.da=a.scrollTop+
b.clientY}}(this));d.bind(this.a,"mouseup",function(a){return function(){a.r=!1;return a.a.className="fattable-body-container"}}(this));d.bind(this.a,"mousemove",function(a){return function(b){return window.setTimeout(function(){var c,e;if(a.r)return c=-b.clientX+a.L,e=-b.clientY+a.da,a.H(c,e)},0)}}(this));d.bind(this.a,"mouseout",function(a){return function(b){if(a.r&&(null===b.toElement||b.toElement.parentElement.parentElement!==a.a))return a.a.className="fattable-body-container",a.r=!1}}(this));
d.bind(this.b,"mousedown",function(a){return function(b){if(1===b.button)return a.A=!0,a.b.className="fattable-header-container fattable-moving",a.L=a.scrollLeft+b.clientX}}(this));d.bind(this.a,"mouseup",function(a){return function(){a.A=!1;return a.b.className="fattable-header-container"}}(this));d.bind(this.b,"mousemove",function(a){return function(b){return window.setTimeout(function(){var c;if(a.A)return c=-b.clientX+a.L,a.H(c)},0)}}(this));d.bind(this.b,"mouseout",function(a){return function(b){if(a.A&&
(null===b.toElement||b.toElement.parentElement.parentElement!==a.b))return a.A.className="fattable-header-container",a.A=!1}}(this));this.ja=this.k>this.d.clientWidth?this.k-this.d.clientWidth:0;this.ka=this.q>this.e.clientHeight?this.q-this.e.clientHeight:0;f="DOMMouseScroll";void 0!==this.a.onwheel?f="wheel":void 0!==this.a.onmousewheel&&(f="mousewheel");h=function(){switch(f){case "wheel":return function(a){var b,c,e,d,g,f;switch(a.Ea){case a.ua:b=null!=(e=-50*a.ba)?e:0;c=null!=(d=-50*a.ca)?d:
0;break;case a.va:b=null!=(g=-1*a.ba)?g:0,c=null!=(f=-1*a.ca)?f:0}return[b,c]};case "mousewheel":return function(a){var b,c,e;b=null!=(c=a.wheelDeltaX)?c:0;a=null!=(e=a.wheelDeltaY)?e:a.wheelDelta;return[b,a]};case "DOMMouseScroll":return function(a){var b,c;c=b=0;a.axis===a.wa?b=-50*a.detail:c=-50*a.detail;return[b,c]}}}();a=function(a){return function(b){var c;c=h(b);if(a.H(a.scrollLeft-c[0],a.scrollTop-c[1]))return b.preventDefault()}}(this);b=function(a){return function(b){var c;c=h(b);if(a.H(a.scrollLeft-
c[0],a.scrollTop))return b.preventDefault()}}(this);d.bind(this.a,f,a);d.bind(this.b,f,b)}c.prototype.p=function(){};c.prototype.H=function(a,b){var c;c=!1;null!=a?(a=t(a,0,this.ja),this.scrollLeft!==a&&(c=!0,this.scrollLeft=a)):a=this.scrollLeft;null!=b?(b=t(b,0,this.ka),this.scrollTop!==b&&(c=!0,this.scrollTop=b)):b=this.scrollTop;this.d.scrollLeft=a;this.e.scrollTop=b;this.p(a,b);return c};return c}();z=function(){function c(a){var b;b=a.a;if(null==b)throw"container not specified.";if("string"===
typeof b)this.a=document.querySelector(b);else if("object"===typeof b)this.a=b;else throw"Container must be a string or a dom element.";this.j(a,"painter",new y);this.j(a,"autoSetup",!0);this.j(a,"model");this.j(a,"nbRows");this.j(a,"rowHeight");this.j(a,"columnWidths");this.j(a,"rowHeight");this.j(a,"headerHeight");this.na=this.K.length;-1===(" "+this.a.className+" ").search(/\sfattable\s/)&&(this.a.className+=" fattable");this.q=this.G*this.X;this.t=I(this.K);this.k=this.t[this.t.length-1];this.m=
{};this.cells={};this.S=new F;this.V();this.Da&&A.ra(function(a){return function(){return a.qa()}}(this))}c.prototype.j=function(a,b,c){if(null==a[b]){if(void 0===c)throw"Expected parameter <"+b+">";this[b]=c}else this[b]=a[b]};c.prototype.V=function(){this.ta=this.a.offsetWidth;this.ha=this.a.offsetHeight-this.F;this.f=Math.min(J(this.t,this.ta)+2,this.K.length);this.g=Math.min((this.ha/this.G|0)+2,this.X)};c.prototype.ia=function(a,b){return[t(b/this.G|0,0,this.X-this.g),t(H(this.t,a),0,this.na-
this.f)]};c.prototype.J=function(){var a;this.S.sa();null!=(a=this.za)&&(a.p=null);this.i.J(this);this.a.innerHTML="";return this.b=this.h=null};c.prototype.qa=function(){var a,b,c,g,d,h,f;this.J();this.V();this.m={};this.cells={};this.a.innerHTML="";this.b=document.createElement("div");this.b.className+=" fattable-header-container";this.b.style.height=this.F+"px";this.s=document.createElement("div");this.s.className="fattable-viewport";this.s.style.width=this.k+"px";this.s.style.height=this.F+"px";
this.b.appendChild(this.s);this.h=document.createElement("div");this.h.className="fattable-body-container";this.h.style.top=this.F+"px";this.l=document.createElement("div");this.l.className="fattable-viewport";this.l.style.width=this.k+"px";this.l.style.height=this.q+"px";g=a=this.f;for(h=2*this.f;a<h;g=a+=1)for(c=d=this.g,f=2*this.g;d<f;c=d+=1)b=document.createElement("div"),b.c=!1,b.style.height=this.G+"px",this.l.appendChild(b),this.cells[c+","+g]=b;a=d=this.f;for(h=2*this.f;d<h;a=d+=1)b=document.createElement("div"),
b.style.height=this.F+"px",b.c=!1,this.m[a]=b,this.s.appendChild(b);this.u=this.g;this.n=this.f;this.display(0,0);this.a.appendChild(this.h);this.a.appendChild(this.b);this.h.appendChild(this.l);this.Y();this.scroll=new G(this.h,this.b,this.k,this.q,this.S);return this.scroll.p=function(a){return function(b,d){var f;f=a.ia(b,d);c=f[0];g=f[1];a.display(c,g);a.s.style.left=-b+"px";a.l.style.left=-b+"px";a.l.style.top=-d+"px";clearTimeout(a.pa);a.pa=setTimeout(a.Y.bind(a),200);return a.p(b,d)}}(this)};
c.prototype.Y=function(a){var b,c,g,d,h,f,k,l,m;null==a&&(a=!1);f=function(b){return function(c){if(a||c.c)return b.o.w(d,function(a){c.c=!1;return b.i.U(c,a)})}}(this);m=[];d=k=this.n;for(l=this.n+this.f;k<l;d=k+=1)c=this.m[d],f(c),m.push(function(){var c,e,f;f=[];g=c=this.u;for(e=this.u+this.g;c<e;g=c+=1)h=g+","+d,b=this.cells[h],a||b.c?f.push(function(a){return function(b){return a.o.v(g,d,function(c){b.c=!1;return a.i.N(b,c)})}}(this)(b)):f.push(void 0);return f}.call(this));return m};c.prototype.p=
function(){};c.prototype.display=function(a,b){this.b.style.display="none";this.h.style.display="none";this.la(b);this.ma(a);this.b.style.display="";return this.h.style.display=""};c.prototype.la=function(a){var b,c,g,d,h,f,k,l,m,n,q,r,p,s,K;m=this.u;q=a-this.n;if(0!==q){h=Math.min(Math.abs(q),this.f);for(b=p=0;p<h;b=p+=1)for(0<q?(n=this.n+b,d=a+b+this.f-h):(n=this.n+this.f-h+b,d=a+b),g=this.t[d]+"px",c=this.K[d]+"px",f=this.m[n],delete this.m[n],this.o.W(d)?this.o.w(d,function(a){return function(b){f.c=
!1;return a.i.U(f,b)}}(this)):f.c||(f.c=!0,this.i.ea(f)),f.style.left=g,f.style.width=c,this.m[d]=f,r=function(a){return function(b){if(a.o.D(k,d))return a.o.v(k,d,function(c){b.c=!1;return a.i.N(b,c)});if(!b.c)return b.c=!0,a.i.T(b)}}(this),k=s=m,K=m+this.g;s<K;k=s+=1)l=k+","+n,b=this.cells[l],delete this.cells[l],this.cells[k+","+d]=b,b.style.left=g,b.style.width=c,r(b);this.n=a}};c.prototype.ma=function(a){var b,c,g,d,h,f,k,l,m,n,q,r,p,s;f=this.u;k=this.n;n=a-f;if(0!==n){g=Math.min(Math.abs(n),
this.g);for(b=r=0;r<g;b=r+=1)for(0<n?(l=f+b,c=a+b+this.g-g):(l=f+this.g-g+b,c=a+b),m=c*this.G+"px",q=function(a){return function(b){if(a.o.D(c,d))return a.o.v(c,d,function(c){b.c=!1;return a.i.N(b,c)});if(!b.c)return b.c=!0,a.i.T(b)}}(this),d=p=k,s=k+this.f;p<s;d=p+=1)h=l+","+d,b=this.cells[h],delete this.cells[h],this.cells[c+","+d]=b,b.style.top=m,q(b);this.u=a}};return c}();B=function(c){return new z(c)};u={Ba:w,Ca:z,ya:y,xa:u,Aa:v,bound:t};for(C in u)v=u[C],B[C]=v;window.Fa=B}).call(this);
