(function(){function D(c,a){function b(){this.constructor=c}for(var f in a)K.call(a,f)&&(c[f]=a[f]);b.prototype=a.prototype;c.prototype=new b;c.Y=a.prototype}var E,w,t,x,F,u,v,y,G,l,H,z,A,B,C,I,K={}.hasOwnProperty;H=function(c){var a,b,f,e,d;a=[0];e=b=0;for(d=c.length;e<d;e++)f=c[e],b+=f,a.push(b);return a};l=function(c,a,b){return c<a?a:c>b?b:c};z=new (function(){function c(){this.O=[];this.W=this.result=!1}c.prototype.pa=function(a){this.W?a(this.result):this.O.push(a)};c.prototype.ma=function(){var a,
b,f,c,d;this.W=!0;this.result=void 0;c=this.O;d=[];b=0;for(f=c.length;b<f;b++)a=c[b],d.push(a(void 0));return d};return c}());C=function(){document.removeEventListener("DOMContentLoaded",C);return z.ma()};document.addEventListener("DOMContentLoaded",C);v=function(){function c(){}c.prototype.C=function(){return!1};c.prototype.T=function(){return!1};c.prototype.v=function(a,b,f){null==f&&(f=function(){});return f("getCell not implemented")};c.prototype.w=function(a,b){null==b&&(b=function(){});return b("getHeader not implemented")};
return c}();u=function(c){function a(){return a.Y.constructor.apply(this,arguments)}D(a,c);a.prototype.da=function(b,a){return b+","+a};a.prototype.ea=function(b){return"col "+b};a.prototype.C=function(){return!0};a.prototype.T=function(){return!0};a.prototype.v=function(b,a,c){null==c&&(c=function(){});return c(this.da(b,a))};a.prototype.w=function(b,a){null==a&&(a=function(){});return a(this.ea(b))};return a}(v);w=function(){function c(a){this.size=null!=a?a:100;this.data={};this.B=[]}c.prototype.L=
function(){return this.data.hasOwnProperty(void 0)};c.prototype.get=function(a){return this.data[a]};c.prototype.set=function(a,b){var f;f=this.B.indexOf(a);0<=f&&this.B.splice(f,1);this.B.push(a);this.B.length>=this.size&&(f=this.B.shift(),delete this.data[f]);return this.data[a]=b};return c}();t=function(c){function a(b){null==b&&(b=100);this.N=new w(b);this.M=new w(b);this.J={};this.A={}}D(a,c);a.prototype.w=function(b){if(this.M.L())return cb(this.M.get(void 0)(b));if(null!=this.A[void 0])return this.A[void 0].push([b,
cb]);this.A[void 0]=[[b,cb]];return this.Ea(void 0,function(a){return function(c){var d,g,h,k;a.M.set(void 0,c);k=a.A[void 0];g=0;for(h=k.length;g<h;g++)d=k[g],b=d[0],d=d[1],d(c(b));return delete a.A[void 0]}}(this))};a.prototype.C=function(){return this.N.L()};a.prototype.v=function(a,f,c){null==c&&(c=function(){});if(this.N.L())return c(this.N.get(void 0)(a,f));if(null!=this.J[void 0])return this.J[void 0].push([a,f,c]);this.J[void 0]=[[a,f,c]]};a.prototype.w=function(a,c){null==c&&(c=function(){});
return c("col "+a)};return a}(v);G=function(c,a){var b,f,e,d;if(c[0]>a)return 0;b=0;for(f=c.length;b+2<f;)if(e=(b+f)/2|0,d=c[e],d<a)b=e;else if(d>a)f=e;else return e;return b};x=function(){function c(){}c.prototype.H=function(a){var b,c;c=a.cells;for(b in c);a=a.m;c=[];for(b in a)c.push(void 0);return c};c.prototype.R=function(a,b){return a.textContent=b};c.prototype.K=function(a,b){return a.textContent=b};c.prototype.ca=function(a){a.textContent="NA"};c.prototype.Q=function(a){return a.textContent=
"NA"};return c}();I=function(c,a){var b,f;b=1;for(f=0;f+b<c.length;)c[f+b]-c[f]>a?f+=1:b+=1;return b};E=function(){function c(){this.G=[]}c.prototype.bind=function(a,b,c){this.G.push([a,b,c]);return a.addEventListener(b,c)};c.prototype.qa=function(){var a,b,c,e,d,g;g=this.G;e=0;for(d=g.length;e<d;e++)a=g[e],c=a[0],b=a[1],a=a[2],c.removeEventListener(b,a);this.G=[]};return c}();F=function(){function c(a,b,c,e){var d,g;this.a=a;this.k=b;this.q=c;this.f=document.createElement("div");this.f.className+=
" fattable-v-scrollbar";this.d=document.createElement("div");this.d.className+=" fattable-h-scrollbar";this.a.appendChild(this.f);this.a.appendChild(this.d);a=document.createElement("div");a.style.height="1px";a.style.width=this.k+"px";b=document.createElement("div");b.style.width="1px";b.style.height=this.q+"px";this.d.appendChild(a);this.f.appendChild(b);this.scrollTop=this.scrollLeft=0;this.d.onscroll=function(a){return function(){if(!a.r)return a.scrollLeft=a.d.scrollLeft,a.p(a.scrollLeft,a.scrollTop)}}(this);
this.f.onscroll=function(a){return function(){if(!a.r)return a.scrollTop=a.f.scrollTop,a.p(a.scrollLeft,a.scrollTop)}}(this);e.bind(this.a,"mousedown",function(a){return function(b){if(1===b.button)return a.r=!0,a.a.className="fattable-body-container fattable-moving",a.aa=a.scrollLeft+b.clientX,a.ba=a.scrollTop+b.clientY}}(this));e.bind(this.a,"mouseup",function(a){return function(){a.r=!1;return a.a.className="fattable-body-container"}}(this));e.bind(this.a,"mousemove",function(a){return function(b){return window.setTimeout(function(){var c,
f;if(a.r)return c=-b.clientX+a.aa,f=-b.clientY+a.ba,a.X(c,f)},0)}}(this));e.bind(this.a,"mouseout",function(a){return function(b){if(a.r&&(null===b.toElement||b.toElement.parentElement.parentElement!==a.a))return a.a.className="fattable-body-container",a.r=!1}}(this));this.ha=this.k>this.d.clientWidth?this.k-this.d.clientWidth:0;this.ia=this.q>this.f.clientHeight?this.q-this.f.clientHeight:0;g=void 0!==this.a.onwheel?"wheel":void 0!==this.a.onmousewheel?"mousewheel":"DOMMouseScroll";d=function(){switch(g){case "wheel":return function(a){var b,
c,f,d,e,g;switch(a.Ca){case a.sa:b=null!=(f=-50*a.Z)?f:0;c=null!=(d=-50*a.$)?d:0;break;case a.ta:b=null!=(e=-1*a.Z)?e:0,c=null!=(g=-1*a.$)?g:0}return[b,c]};case "mousewheel":return function(a){var b,c,f;b=null!=(c=a.wheelDeltaX)?c:0;a=null!=(f=a.wheelDeltaY)?f:a.wheelDelta;return[b,a]};case "DOMMouseScroll":return function(a){var b,c;c=b=0;a.axis===a.ua?b=-50*a.detail:c=-50*a.detail;return[b,c]}}}();e.bind(this.a,g,function(a){return function(b){b.preventDefault();b=d(b);return a.X(a.scrollLeft-b[0],
a.scrollTop-b[1])}}(this))}c.prototype.p=function(){};c.prototype.X=function(a,b){a=l(a,0,this.ha);b=l(b,0,this.ia);this.scrollLeft=a;this.scrollTop=b;this.d.scrollLeft=a;this.f.scrollTop=b;return this.p(a,b)};return c}();y=function(){function c(a){var b;b=a.a;if(null==b)throw"container not specified.";if("string"===typeof b)this.a=document.querySelector(b);else if("object"===typeof b)this.a=b;else throw"Container must be a string or a dom element.";this.j(a,"painter",new x);this.j(a,"autoSetup",
!0);this.j(a,"model");this.j(a,"nbRows");this.j(a,"rowHeight");this.j(a,"columnWidths");this.j(a,"rowHeight");this.j(a,"headerHeight");this.la=this.I.length;this.a.className+=" fattable";this.q=this.F*this.U;this.t=H(this.I);this.k=this.t[this.t.length-1];this.m={};this.cells={};this.P=new E;this.S();this.Ba&&z.pa(function(a){return function(){return a.oa()}}(this))}c.prototype.j=function(a,b,c){if(null==a[b]){if(void 0===c)throw"Expected parameter <"+b+">";this[b]=c}else this[b]=a[b]};c.prototype.S=
function(){this.ra=this.a.offsetWidth;this.fa=this.a.offsetHeight-this.D;this.c=Math.min(I(this.t,this.ra)+2,this.I.length);this.e=Math.min((this.fa/this.F|0)+2,this.U)};c.prototype.ga=function(a,b){return[l(b/this.F|0,0,this.U-this.e),l(G(this.t,a),0,this.la-this.c)]};c.prototype.H=function(){var a;this.P.qa();null!=(a=this.xa)&&(a.p=null);this.i.H(this);this.a.innerHTML="";return this.h=this.g=null};c.prototype.oa=function(){var a,b,c,e,d,g,h;this.H();this.S();this.m={};this.cells={};this.a.innerHTML=
"";this.h=document.createElement("div");this.h.className+=" fattable-header-container";this.h.style.height=this.D+"px";this.s=document.createElement("div");this.s.className="fattable-viewport";this.s.style.width=this.k+"px";this.s.style.height=this.D+"px";this.h.appendChild(this.s);this.g=document.createElement("div");this.g.className="fattable-body-container";this.g.style.top=this.D+"px";this.l=document.createElement("div");this.l.className="fattable-viewport";this.l.style.width=this.k+"px";this.l.style.height=
this.q+"px";e=a=this.c;for(g=2*this.c;a<g;e=a+=1)for(c=d=this.e,h=2*this.e;d<h;c=d+=1)b=document.createElement("div"),b.b=!1,b.style.height=this.F+"px",this.l.appendChild(b),this.cells[c+","+e]=b;a=d=this.c;for(g=2*this.c;d<g;a=d+=1)b=document.createElement("div"),b.style.height=this.D+"px",b.b=!1,this.m[a]=b,this.s.appendChild(b);this.u=this.e;this.n=this.c;this.display(0,0);this.a.appendChild(this.g);this.a.appendChild(this.h);this.g.appendChild(this.l);this.V();this.scroll=new F(this.g,this.k,
this.q,this.P);return this.scroll.p=function(a){return function(b,d){var g;g=a.ga(b,d);c=g[0];e=g[1];a.display(c,e);a.s.style.left=-b+"px";a.l.style.left=-b+"px";a.l.style.top=-d+"px";clearTimeout(a.na);a.na=setTimeout(a.V.bind(a),200);return a.p(b,d)}}(this)};c.prototype.V=function(){var a,b,c,e,d,g,h,k,m;g=function(a){return function(b){if(b.b)return a.o.w(e,function(c){b.b=!1;return a.i.R(b,c)})}}(this);m=[];e=h=this.n;for(k=this.n+this.c;h<k;e=h+=1)b=this.m[e],g(b),m.push(function(){var b,g,h;
h=[];c=b=this.u;for(g=this.u+this.e;b<g;c=b+=1)d=c+","+e,a=this.cells[d],a.b?h.push(function(a){return function(b){return a.o.v(c,e,function(c){b.b=!1;return a.i.K(b,c)})}}(this)(a)):h.push(void 0);return h}.call(this));return m};c.prototype.p=function(){};c.prototype.display=function(a,b){this.h.style.display="none";this.g.style.display="none";this.ja(b);this.ka(a);this.h.style.display="";return this.g.style.display=""};c.prototype.ja=function(a){var b,c,e,d,g,h,k,m,l,n,q,r,p,s,J;l=this.u;q=a-this.n;
if(0!==q){g=Math.min(Math.abs(q),this.c);for(b=p=0;p<g;b=p+=1)for(0<q?(n=this.n+b,d=a+b+this.c-g):(n=this.n+this.c-g+b,d=a+b),e=this.t[d]+"px",c=this.I[d]+"px",h=this.m[n],delete this.m[n],this.o.T(d)?this.o.w(d,function(a){return function(b){h.b=!1;return a.i.R(h,b)}}(this)):h.b||(h.b=!0,this.i.ca(h)),h.style.left=e,h.style.width=c,this.m[d]=h,r=function(a){return function(b){if(a.o.C(k,d))return a.o.v(k,d,function(c){b.b=!1;return a.i.K(b,c)});if(!b.b)return b.b=!0,a.i.Q(b)}}(this),k=s=l,J=l+this.e;s<
J;k=s+=1)m=k+","+n,b=this.cells[m],delete this.cells[m],this.cells[k+","+d]=b,b.style.left=e,b.style.width=c,r(b);this.n=a}};c.prototype.ka=function(a){var b,c,e,d,g,h,k,m,l,n,q,r,p,s;h=this.u;k=this.n;n=a-h;if(0!==n){e=Math.min(Math.abs(n),this.e);for(b=r=0;r<e;b=r+=1)for(0<n?(m=h+b,c=a+b+this.e-e):(m=h+this.e-e+b,c=a+b),l=c*this.F+"px",q=function(a){return function(b){if(a.o.C(c,d))return a.o.v(c,d,function(c){b.b=!1;return a.i.K(b,c)});if(!b.b)return b.b=!0,a.i.Q(b)}}(this),d=p=k,s=k+this.c;p<
s;d=p+=1)g=m+","+d,b=this.cells[g],delete this.cells[g],this.cells[c+","+d]=b,b.style.top=l,q(b);this.u=a}};return c}();A=function(c){return new y(c)};t={za:v,Aa:y,wa:x,va:t,ya:u,bound:l};for(B in t)u=t[B],A[B]=u;window.Da=A}).call(this);
